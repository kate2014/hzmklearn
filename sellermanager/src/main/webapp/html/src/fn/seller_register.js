!function(e){e._({"~name":"seller.sellerinfo",uQueue:[],cQ:[],"~superclass":e.base,ctor:function(){this.api="sellerinfo",this._super()},upload_tpl:'<div class="thumb_list" {{?it.src}} {{??}} init="true" {{?}} cb-node="{{=it.name}}_{{=it.id}}" cb-event="mouseover~showDelectImgItem:1;mouseout~showDelectImgItem:0">                            <span cb-node="{{=it.name}}_del_{{=it.id}}" {{?it.src}}style="display:block;"{{?}} class="delete_img_register" cb-event="click~removeImg:{{=it.name}},{{=it.id}}"><i class="iconfont">󰄿</i></span>                            <div class="" cb-node="{{=it.name}}_btn_{{=it.id}}" id="{{=it.name}}_btn_{{=it.id}}"></div>                            <img cb-node="{{=it.name}}_img_{{=it.id}}" src="{{?it.src}}{{=it.src}}{{?}}" _src="{{?it.src}}{{=it.src}}{{?}}" width="130" height="90" style="margin-top:-102px;position:absolute"/>                        </div>',postCreate:function(){this.$.loading.show(),this.apply_type=1,this.refreshVerifyCode("ui-checkcode-imgcode-img","ui-verify-code-refresh");var e=this.getQuery("status");e&&"update"==e?(this.u=!0,this.request("getAccountprofile")):(this.$.loading.hide(),this.request("getSellerRegisterManagerInfo"))},getSellerRegisterManagerInfoArgs:function(){return{type:"post",data:{seller_id:"1"},done:cobra.ride(this,function(e){$.when(this.compile(this.$.seller_manager,"register>seller_ma_list",e)).done(cobra.ride(this,function(){!this.temData||0!=this.temData.apply_type&&"0"!=this.temData.apply_type?this.initIndividualRegistryPanel():this.initEnterpriseRegistryPanel()})).fail(function(){})}),fail:function(e){this._msgBox.warn(e.responseBody.responseInfo.reasons.msg)}}},initIndividualRegistryPanel:function(){var e=this,t={};this.clearContentInIE(),$.when(this.compile(this.$.content,"register>personal_template",t)).done(cobra.ride(this,function(){$.each({id_card_front_upload:1,id_card_back_upload:1,half_idcard_upload:1},function(t,i){e.makeUpload(t,i)}),this.u&&this.setData()})).fail(function(){})},initEnterpriseRegistryPanel:function(){var e=this,t={};this.clearContentInIE(),$.when(this.compile(this.$.content,"register>seller_template",t)).done(cobra.ride(this,function(){$.each({license_upload:1,organization_upload:1,registration_upload:2,id_card_front_upload:1,id_card_back_upload:1},function(t,i){e.makeUpload(t,i)}),this.$.license_start.cxCalendar(),this.$.license_end.cxCalendar(),this.u&&this.setData()})).fail(function(){})},createOpt:function(e,t,i){var a=this,s=t,n=e,l={__name:n,__sid:s,formData:{timestamp:(new Date).getTime(),token:"A"},fileSizeLimit:"3MB",buttonClass:"uploadify-button uploadify-button2",width:130,height:90,multi:!1,swf:a.host[a.host.use]+"/seller/src/plugin/uploadify/uploadify.swf",uploader:a.host.imageUploadUrl,buttonText:i||"点击上传<br/>",onUploadProgress:function(e,t,i,a,s){var n=Math.round(a/s*100)-1;n>100&&(n=100),this._ps.find(".uploadify-progress-bar").css("width",n+"%").html(n+"%"),this.button.html("正在上传")},onUploadError:function(){this.queueData.queueBytesUploaded=0,this._ps.find(".uploadify-progress-bar").css("width","100%").css("background","red").html("上传出错")},onUploadStart:function(){this.queueData.queueBytesUploaded=0;var e=(this.getSetting("__sid"),this.getSetting("__name"),a.$[this.settings.__name+"_"+this.settings.__sid]);this._ps=$('<div class="uploadify-progress-register" style="position: absolute;top: 40%;"><div class="uploadify-progress-bar"></div></div>'),e.append(this._ps)},itemTemplate:"",onUploadSuccess:function(){this._ps.remove(),this.queueData.queueBytesUploaded=0;var e=this.getSetting("__sid"),t=this.getSetting("__name"),i=(a.$[this.settings.__name+"_"+this.settings.__sid],$.parseJSON(arguments[1])),s="",n="";!(i&&i.responseBody.data&&""!=i.responseBody.data)&&this.button.html("点击上传")&&a._msgBox.warn("图片上传失败，请检查图片是否异常"),i&&i.responseBody.data&&1==i.responseBody.data.status&&(s=i.responseBody.data.thumb,n=i.responseBody.data.url,this.button.html(""),a.$[t+"_"+e].removeAttr("init"),n&&a.$[t+"_img_"+e].attr("_src",n).attr("src",n),a.checkUploadElement(t))}};return l},clearContentInIE:function(){cobra.ie&&(this.$.content[0].innerHTML="")},changeReg:function(e){this.apply_type=e,1==e?(this.$.per_btn.addClass("new-btn-color"),this.$.seller_btn.removeClass("new-btn-color"),this.initIndividualRegistryPanel()):(this.$.seller_btn.addClass("new-btn-color"),this.$.per_btn.removeClass("new-btn-color"),this.initEnterpriseRegistryPanel())},makeUpload:function(e,t,i,a){var s=this;t&&(s.cQ[e]=t);var n=s.$[e],l=s.uQueue[e]||1200,r=e+"_btn_"+l;i?n.prepend(s.doT(s.upload_tpl,{name:e,id:l,src:i})):n.append(s.doT(s.upload_tpl,{name:e,id:l,src:i}));var _=s.$[r];_&&_.uploadify(s.createOpt(e,l,a)),s.uQueue[e]=++l},removeImg:function(e,t){var i=this;i.$[e+"_"+t].remove(),i.checkUploadElement(e)},checkUploadElement:function(e){var t=this;if(0==t.$[e].children().length)t.makeUpload(e);else if(t.$[e].children().length<=t.cQ[e]-1){var i=t.$[e].children();!i.filter("div[init]").length>0&&t.makeUpload(e)}var a=t.$[e].find("img"),s=[];cobra.ride(t,$.each(a,function(e,t){$(t).attr("_src")&&s.push($(t).attr("_src"))})),t.$[e+"_input"].val(s.join(","))},showDelectImgItem:function(e,t){"1"==e?!t.attr("init")&&t.find(".delete_img_register").show():t.find(".delete_img_register").hide()},fill_images_input:function(e,t){if(!t)return!1;var i=this;if(this.$[e+"_input"].val(t),t.indexOf(",")<0)i.makeUpload(e,i.cQ[e],t," "),i.$[e].children().filter("div[init]").remove();else{var a=t.split(",").reverse();cobra.ride(i,$.each(a,function(t,a){i.makeUpload(e,i.cQ[e],a," ")})),i.$[e].children().length>a.length&&i.$[e].children().filter("div[init]").remove()}},fill_license_upload_input:function(e){this.fill_images_input("license_upload",e)},fill_organization_upload_input:function(e){this.fill_images_input("organization_upload",e)},fill_registration_input:function(e){this.fill_images_input("registration_upload",e)},fill_id_card_front_input:function(e){this.fill_images_input("id_card_front_upload",e)},fill_id_card_back_input:function(e){this.fill_images_input("id_card_back_upload",e)},fill_half_idcard_input:function(e){this.fill_images_input("half_idcard_upload",e)},getAccountprofileArgs:function(){return{type:"post",data:{seller_id:"1"},done:cobra.ride(this,function(e){this.temData=e.data,0==this.temData.apply_type||"0"==this.temData.apply_type?(this.apply_type=0,this.$.per_btn.removeClass("new-btn-color"),this.$.seller_btn.addClass("new-btn-color")):(this.apply_type=1,this.$.per_btn.addClass("new-btn-color"),this.$.seller_btn.removeClass("new-btn-color")),this.request("getSellerRegisterManagerInfo")}),fail:function(e){this.$.loading.hide(),this._msgBox.warn(e.responseBody.responseInfo.reasons.msg)}}},selectSellerManager:function(){var e=this.$.seller_manager.val();"9999"!=e?this.$.seller_manager_txt.hide():this.$.seller_manager_txt.show()},setData:function(){this.$.company_name&&this.$.company_name.val(this.temData.name),this.$.license_number&&this.$.license_number.val(this.temData.license_no),this.$.license_start&&this.$.license_start.val(this.temData.license_start),this.$.license_end&&this.$.license_end.val(this.temData.license_end),this.$.license_address&&this.$.license_address.val(this.temData.license_addr),this.$.registered_capital&&this.$.registered_capital.val(this.temData.reg_capital),this.$.business_scope&&this.$.business_scope.val(this.temData.bus_scope),this.$.corporate_name&&this.$.corporate_name.val(this.temData.legal_per_name),this.$.address.val&&this.$.address.val(this.temData.address),this.$.company_tel&&this.$.company_tel.val(this.temData.u_tel),this.$.company_fax&&this.$.company_fax.val(this.temData.fax),this.$.website&&this.$.website.val(this.temData.website),this.$.brand&&this.$.brand.val(this.temData.brands),this.$.shop&&this.$.shop.val(this.temData.tmall_website),0==this.temData.apply_type||"0"==this.temData.apply_type?this.fill_license_upload_input(this.temData.lic_scan_pic):"",0==this.temData.apply_type||"0"==this.temData.apply_type?this.fill_organization_upload_input(this.temData.org_scan_pic):"",0==this.temData.apply_type||"0"==this.temData.apply_type?this.fill_registration_input(this.temData.tax_scan_pic):"",this.fill_id_card_front_input(this.temData.idcard_fro_pic),this.fill_id_card_back_input(this.temData.idcard_rev_pic),1==this.temData.apply_type||"1"==this.temData.apply_type?this.fill_half_idcard_input(this.temData.head_pic):"",this.$.contacts_name&&this.$.contacts_name.val(this.temData.u_name),this.$.contacts_posts&&this.$.contacts_posts.val(this.temData.u_position),this.$.contacts_id_number&&this.$.contacts_id_number.val(this.temData.u_idcard),this.$.contacts_mobile&&this.$.contacts_mobile.val(this.temData.u_mobile),this.$.contacts_qq&&this.$.contacts_qq.val(this.temData.u_qq),this.$.seller_manager&&this.$.seller_manager.val(this.temData.b_id),"9999"==this.temData.b_id?this.$.seller_manager_txt.val(this.temData.b_name)&&this.$.seller_manager_txt.show():"",this.usermail=this.temData.account,this.$.userdiv.hide(),this.$.loading.hide()},submitRegisterForm:function(){this.switchKey();var e,t=this,i=this.$.seller_manager.val(),a=this.$.seller_manager.find("option:selected").text(),s=this.$.seller_manager_txt.val();switch("9999"!=i?this.$.seller_manager.attr("cb-id",a):this.$.seller_manager.attr("cb-id",s),this.model){case"0":e={account:this.$.username.val(),passwd:this.$.password.val(),passwdConfirm:this.$.passwdConfirm.val(),name:this.$.company_name.val(),address:this.$.address.val(),u_tel:this.$.company_tel.val(),fax:this.$.company_fax.val(),tmall_website:this.$.shop.val(),idcard_fro_pic:this.$.id_card_front_upload_input.val(),idcard_rev_pic:this.$.id_card_back_upload_input.val(),head_pic:this.$.half_idcard_upload_input.val(),u_name:this.$.contacts_name.val(),u_idcard:this.$.contacts_id_number.val(),u_mobile:this.$.contacts_mobile.val(),u_qq:this.$.contacts_qq.val(),b_id:this.$.seller_manager.val(),b_name:this.$.seller_manager.attr("cb-id"),apply_type:this.apply_type,verify:this.$.verify_code.val()};break;case"1":e={account:this.$.username.val(),passwd:this.$.password.val(),passwdConfirm:this.$.passwdConfirm.val(),name:this.$.company_name.val(),license_no:this.$.license_number.val(),license_start:this.$.license_start.val(),license_end:this.$.license_end.val(),license_addr:this.$.license_address.val(),reg_capital:this.$.registered_capital.val(),bus_scope:this.$.business_scope.val(),legal_per_name:this.$.corporate_name.val(),address:this.$.address.val(),u_tel:this.$.company_tel.val(),fax:this.$.company_fax.val(),website:this.$.website.val(),brands:this.$.brand.val(),tmall_website:this.$.shop.val(),lic_scan_pic:this.$.license_upload_input.val(),org_scan_pic:this.$.organization_upload_input.val(),tax_scan_pic:this.$.registration_upload_input.val(),idcard_fro_pic:this.$.id_card_front_upload_input.val(),idcard_rev_pic:this.$.id_card_back_upload_input.val(),u_name:this.$.contacts_name.val(),u_position:this.$.contacts_posts.val(),u_idcard:this.$.contacts_id_number.val(),u_mobile:this.$.contacts_mobile.val(),u_qq:this.$.contacts_qq.val(),b_id:this.$.seller_manager.val(),b_name:this.$.seller_manager.attr("cb-id"),apply_type:this.apply_type,verify:this.$.verify_code.val()};break;case"2":e={name:this.$.company_name.val(),address:this.$.address.val(),u_tel:this.$.company_tel.val(),fax:this.$.company_fax.val(),tmall_website:this.$.shop.val(),idcard_fro_pic:this.$.id_card_front_upload_input.val(),idcard_rev_pic:this.$.id_card_back_upload_input.val(),head_pic:this.$.half_idcard_upload_input.val(),u_name:this.$.contacts_name.val(),u_idcard:this.$.contacts_id_number.val(),u_mobile:this.$.contacts_mobile.val(),u_qq:this.$.contacts_qq.val(),verify:this.$.verify_code.val(),b_id:this.$.seller_manager.val(),b_name:this.$.seller_manager.attr("cb-id"),apply_type:this.apply_type,account:this.usermail};break;case"3":e={name:this.$.company_name.val(),license_no:this.$.license_number.val(),license_start:this.$.license_start.val(),license_end:this.$.license_end.val(),license_addr:this.$.license_address.val(),reg_capital:this.$.registered_capital.val(),bus_scope:this.$.business_scope.val(),legal_per_name:this.$.corporate_name.val(),address:this.$.address.val(),u_tel:this.$.company_tel.val(),fax:this.$.company_fax.val(),website:this.$.website.val(),brands:this.$.brand.val(),tmall_website:this.$.shop.val(),lic_scan_pic:this.$.license_upload_input.val(),org_scan_pic:this.$.organization_upload_input.val(),tax_scan_pic:this.$.registration_upload_input.val(),idcard_fro_pic:this.$.id_card_front_upload_input.val(),idcard_rev_pic:this.$.id_card_back_upload_input.val(),u_name:this.$.contacts_name.val(),u_position:this.$.contacts_posts.val(),u_idcard:this.$.contacts_id_number.val(),u_mobile:this.$.contacts_mobile.val(),u_qq:this.$.contacts_qq.val(),verify:this.$.verify_code.val(),b_id:this.$.seller_manager.val(),b_name:this.$.seller_manager.attr("cb-id"),apply_type:this.apply_type,account:this.usermail}}this.getSellerRegisterArgs=function(){return{type:"post",data:e,done:cobra.ride(this,function(){location.href="seller_register_reviewing.html"}),fail:function(e){arguments.length>1&&(e.responseBody.responseInfo&&"8888"==e.responseBody.responseInfo.reasons.code?location.href="seller_admin_view.html":(t._msgBox.warn(e.responseBody.responseInfo.reasons.msg),t.$.verifycode_refresh.click()))}}},this.getSellerRegisterModifyArgs=function(){return{type:"post",data:e,done:cobra.ride(this,function(){location.href="seller_register_reviewing.html"}),fail:function(e){arguments.length>1&&(t._msgBox.warn(e.responseBody.responseInfo.reasons.msg),t.$.verifycode_refresh.click())}}},this.u?this.validateForm()&&this.request("getSellerRegisterModify"):this.validateForm()&&this.request("getSellerRegister")},validateForm:function(){switch(this.model){case"0":return this.$.registerForm.valid([{name:"username",type:"mail",simple:"用户名"},{name:"passwd",type:"password",simple:"密码",min:8,max:20},{name:"passwdConfirm",type:"password",simple:"密码",min:8,max:20},{name:"company_name",type:"",simple:"店铺名称"},{name:"address",type:"",simple:"联系地址"},{name:"contacts_name",type:"",simple:"姓名"},{name:"company_tel",type:"",simple:"电话"},{name:"contacts_id_number",type:"",simple:"身份证号码"},{name:"contacts_mobile",type:"mobile",simple:"手机"},{name:"contacts_qq",type:"",simple:"QQ"},{name:"seller_manager",type:"",simple:"招商经理"},{name:"verify_code",type:"",simple:"验证码"}]);case"1":return this.$.registerForm.valid([{name:"username",type:"mail",simple:"用户名"},{name:"passwd",type:"password",simple:"密码",min:8,max:20},{name:"passwdConfirm",type:"password",simple:"密码",min:8,max:20},{name:"company_name",type:"",simple:"公司名称"},{name:"license_number",type:"",simple:"营业执照注册号"},{name:"license_start",type:"",simple:"开始日期"},{name:"license_end",type:"",simple:"结束日期"},{name:"license_address",type:"",simple:"营业执照所在地"},{name:"registered_capital",type:"",simple:"注册资金"},{name:"business_scope",type:"",simple:"经营范围"},{name:"corporate_name",type:"",simple:"法人姓名"},{name:"address",type:"",simple:"联系地址"},{name:"company_tel",type:"",simple:"电话"},{name:"brand",type:"",simple:"旗下母婴品牌/代理"},{name:"contacts_name",type:"",simple:"姓名"},{name:"contacts_id_number",type:"",simple:"身份证号码"},{name:"contacts_mobile",type:"mobile",simple:"手机"},{name:"contacts_qq",type:"",simple:"QQ"},{name:"seller_manager",type:"",simple:"招商经理"},{name:"verify_code",type:"",simple:"验证码"}]);case"2":return this.$.registerForm.valid([{name:"company_name",type:"",simple:"店铺名称"},{name:"address",type:"",simple:"联系地址"},{name:"contacts_name",type:"",simple:"姓名"},{name:"company_tel",type:"",simple:"电话"},{name:"contacts_id_number",type:"",simple:"身份证号码"},{name:"contacts_mobile",type:"mobile",simple:"手机"},{name:"contacts_qq",type:"",simple:"QQ"},{name:"seller_manager",type:"",simple:"招商经理"},{name:"verify_code",type:"",simple:"验证码"}]);case"3":return this.$.registerForm.valid([{name:"company_name",type:"",simple:"公司名称"},{name:"license_number",type:"",simple:"营业执照注册号"},{name:"license_start",type:"",simple:"开始日期"},{name:"license_end",type:"",simple:"结束日期"},{name:"license_address",type:"",simple:"营业执照所在地"},{name:"registered_capital",type:"",simple:"注册资金"},{name:"business_scope",type:"",simple:"经营范围"},{name:"corporate_name",type:"",simple:"法人姓名"},{name:"address",type:"",simple:"联系地址"},{name:"company_tel",type:"",simple:"电话"},{name:"brand",type:"",simple:"旗下母婴品牌/代理"},{name:"contacts_name",type:"",simple:"姓名"},{name:"contacts_id_number",type:"",simple:"身份证号码"},{name:"contacts_mobile",type:"mobile",simple:"手机"},{name:"contacts_qq",type:"",simple:"QQ"},{name:"seller_manager",type:"",simple:"招商经理"},{name:"verify_code",type:"",simple:"验证码"}])}},switchKey:function(){this.model=this.u||1!=this.apply_type?this.u||0!=this.apply_type?this.u&&1==this.apply_type?"2":"3":"1":"0"}}),$(function(){new seller.sellerinfo})}(cobra);