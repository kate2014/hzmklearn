!function(t){t._({"~name":"goods.list","~superclass":t.base,ctor:function(){this.api="goods",this._super()},postCreate:function(){var t=this;this.$.loading.show(),this.$.create_time_start.cxCalendar(),this.$.create_time_end.cxCalendar(),this.$.searchBtn.keydown(function(s){var o=s.which;13==o&&(s.preventDefault(),t.$.searchBtn.click())}),$("body").keypress(function(s){s.preventDefault(),13==s.keyCode&&t.searchResult()}),this.request("brand_list")},initLazyLoad:function(){new cobra.ImageLazyLoad({mode:"manual",scope:100})},getDraftGoodsListArgs:function(){{var t=this.pageId?this.pageId:1;window.status||""}return{type:"get",data:{key_word:this.$.good_key.val(),brand_id:this.$.brand_key?this.$.brand_key.val():"",start_time:this.$.create_time_start.val(),end_time:this.$.create_time_end.val(),p:t},done:cobra.ride(this,function(t){return this.$.loading.hide(),$.when(this.compile(this.$.goods_list_box,"goods>goods_draft_list_item",t)).done(cobra.ride(this,function(){this.initLazyLoad()})).fail(function(){}),$.when(this.compile(this.$.pageination,"goods>goods_list_pageination",t)).done(cobra.ride(this,function(){})).fail(function(){}),t}),fail:function(){}}},brand_listArgs:function(){var t=this;return{type:"post",data:{},done:cobra.ride(t,function(s){$.when(this.compile(this.$.brand_key,"goods>brand_key",s)).done(cobra.ride(this,function(){this.request("getDraftGoodsList")})).fail(function(s){arguments.length>1&&t._msgBox.warn(s.responseInfo.reasons.msg)})}),fail:function(t){arguments.length>1&&this._msgBox.warn(t.responseInfo.reasons.msg)}}},modifyGoods:function(t){window.location.href="../seller_goods_management/goods_modify.html?draftId="+t},deleteGoods:function(t){var s=this;miniDialog.confirm('<span style="color:red;font-weight:700;">确认要删除该商品?</span>',function(){s.goods_draft_delArgs=null,s.goods_draft_delArgs=function(){return{type:"get",data:{id:t},done:cobra.ride(s,function(t){this._msgBox.done(t.responseInfo.reasons.msg),setTimeout(function(){window.location.reload()},800)}),fail:function(t){arguments.length>1&&this._msgBox.info(t.responseBody.responseInfo.reasons.msg)}}},s.request("goods_draft_del")},function(){},{title:"唯一优品提醒您",width:300})},search_box_change:function(){var t=this,s=t.$.goods_search_input.val();""!=$.trim(s)&&this.request("goods_name_search")},goods_name_searchArgs:function(){var t=this;return{type:"post",data:{search_name:t.$.goods_search_input.val()},done:cobra.ride(t,function(s){$.when(this.compile(this.$.goods_search_result,"goods>goods_search_result_item",s)).done(cobra.ride(this,function(){this.$.goods_search_result.show()})).fail(function(s){arguments.length>1&&t._msgBox.warn(s.responseInfo.reasons.msg)})}),fail:function(t){arguments.length>1&&this._msgBox.warn(t.responseInfo.reasons.msg)}}},select_search_result:function(t){this.$.goods_search_result.hide(),this.$.goods_search_input.val(t)},goods_searchArgs:function(){var t=this;return{type:"get",data:{search_name:t.$.goods_search_input.val()},done:cobra.ride(t,function(t){return $.when(this.compile(this.$.goods_list_box,"goods>goods_list_item",t)).done(cobra.ride(this,function(){this.initLazyLoad()})).fail(function(){}),$.when(this.compile(this.$.pageination,"goods>goods_list_pageination",t)).done(cobra.ride(this,function(){})).fail(function(){}),t}),fail:function(t){arguments.length>1&&this._msgBox.warn(t.responseInfo.reasons.msg)}}},search_submit:function(){this.$.goods_search_result.hide(),this.request("goods_search")},goPage:function(t){this.pageId=t,this.request("getDraftGoodsList")},searchResult:function(){this.pageId=1,this.$.loading.show(),this.request("getDraftGoodsList")}}),$(function(){new goods.list})}(cobra);