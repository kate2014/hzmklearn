!function(e){e._({"~name":"seller.sellerinfo","~superclass":e.base,ctor:function(){this.api="sellerinfo",this._super()},postCreate:function(){this.set("tmpl#manageRefundAddress>manageAddress","getRefundAddress")},getRefundAddressArgs:function(){return{type:"post",data:{seller_id:"1"},done:cobra.ride(this,function(e){return e}),fail:function(e){this._msgBox.warn(e.responseBody.responseInfo.reasons.msg)}}},chkReg:function(e){return null!=e&&void 0!=e&&e>-1?!0:void 0},changeAddr:function(e){var t=this.req.getRefundAddress;regionExport().fillProvince(t.data[e].region_lv2),regionExport().fillCity(t.data[e].region_lv2,t.data[e].region_lv3),regionExport().fillCounty(t.data[e].region_lv2,t.data[e].region_lv3,t.data[e].region_lv4,t.data[e].region_lv5),regionExport().fillTown(t.data[e].region_lv2,t.data[e].region_lv3,t.data[e].region_lv4,t.data[e].region_lv5),this.$.detailAddr.val(t.data[e].address),this.$.zipcode.val(t.data[e].zipcode),this.$.mobile.val(t.data[e].mobile),this.$.fullname.val(t.data[e].consignee),this.$.addrId.val(t.data[e].id),this.$.isdefault.val(t.data[e].is_default),"1"==t.data[e].is_default?this.$.isdefault.prop("checked","checked"):this.$.isdefault.removeAttr("checked"),this.$.addAddr.hide(),this.$.uptAddr.show()},submitForm:function(){var e=this.$.addrId.val(),t=0;this.$.isdefault.prop("checked")&&(t=1),this.getSubmitRefundAddressArgs=function(){return{type:"post",data:{ctl:"seller",act:"updateAddr",addressId:e,seller_id:"219",consignee:this.$.fullname.val(),region_lv1:this.$.nation.val(),region_lv2:this.$.province.val(),region_lv3:this.$.city.val(),region_lv4:this.$.area.val(),region_lv5:this.$.town.val(),address:this.$.detailAddr.val(),zipcode:this.$.zipcode.val(),mobile:this.$.mobile.val(),is_default:t},done:cobra.ride(this,function(){this.$.addrId.val(""),this.$.zipcode.val(""),this.$.fullname.val(""),this.$.mobile.val(""),location.reload()}),fail:function(e){this._msgBox.warn(e.responseBody.responseInfo.reasons.msg)}}},console.log(this.validateForm()),this.validateForm()&&this.request("getSubmitRefundAddress")},getAddrId:function(e){var t=this.req.getRefundAddress,i=t.data[e].id;return i},setDefault:function(e){var t=this.getAddrId(e);this.getDefaultAddressArgs=function(){return{type:"post",data:{addressId:t},done:cobra.ride(this,function(){location.reload()}),fail:function(e){this._msgBox.warn(e.responseBody.responseInfo.reasons.msg)}}},this.request("getDefaultAddress")},_deleteAddr:function(e){var t=this.getAddrId(e);this.getDelRefundAddressArgs=function(){return{type:"post",data:{addressId:t},done:cobra.ride(this,function(){location.reload()}),fail:function(e){this._msgBox.warn(e.responseBody.responseInfo.reasons.msg)}}},this.request("getDelRefundAddress")},confirmDel:function(e){miniDialog.confirm("确认要删除该收货地址吗?",cobra.ride(this,function(){this._deleteAddr(e)}),function(){},{title:"删除收货地址",width:350})},validateForm:function(){return this.$.refundAddrForm.valid([{name:"province",type:"",simple:"省份"},{name:"city",type:"",simple:"城市"},{name:"area",type:"",simple:"地区"},{name:"town",type:"",simple:"街道"},{name:"zip",type:"zipcode",require:!1,simple:"邮政编码"},{name:"address",type:"",simple:"详细地址"},{name:"fullname",type:"",simple:"姓名"},{name:"mobile",type:"mobile",simple:"手机号码"}])}}),$(function(){new seller.sellerinfo,regionExport().fillProvince(),regionExport().init_region()})}(cobra);