!function(){function t(t,o){this.init(t,o)}t.prototype={init:function(t,o){this.triggerSelector=t.trigger,this.targetSelector=t.target,this.cancelSelector=t.cancel,this.onSelect=t.onSelect,this.onCancel=t.onCancel,this.cobra=o,this.addEvent()},postCreate:function(){},addEvent:function(){var t=this;$("body").on("click",this.triggerSelector,function(){t.popupCorners()}),this.cancelSelector&&$("body").on("click",this.cancelSelector,function(){t.cancel()}),$("body").on("click",".mark-item",function(){var t=$(this);$(".mark-item").removeClass("checked"),t.addClass("checked")})},popupCorners:function(){var t=this;t.popupCorner?t.popupCorner.show():(t.popupCorner=miniDialog.confirm('<div id="popup-corner-box" cb-node="cornerBox" class="popup-corner-box"></div>',cobra.noop,cobra.noop,{title:"请选择角标",width:600,height:360,buttons:[{value:"确定",click:function(){var o=$(".mark-item.checked"),e={id:o.attr("data-id"),thumb:o.attr("data-thumb")};t.popupCorner&&t.popupCorner.hide(),t.select(e)}},{value:"取消",type:"secondary",click:function(){}}],closeX:!0},!0),setTimeout(function(){t.doRequest()},0))},select:function(t){this.onSelect&&this.onSelect.call(this,t)},cancel:function(){this.onCancel&&this.onCancel.call(this)},doRequest:function(){this.cobra.mark_listArgs=this.mark_listArgs(),this.cobra.request("mark_list")},mark_listArgs:function(){var t=this;return function(){return{type:"get",data:{},done:cobra.ride(this,function(o){return $.when(this.compile(this.$.cornerBox,"mark>corner_list",o)).done(cobra.ride(this,function(){t.initLazyLoad()})).fail(function(){}),o}),fail:function(){}}}},initLazyLoad:function(){new cobra.ImageLazyLoad({mode:"manual",scope:100})}},cobra.ModCorner=t}(cobra);