!function(t){var e=t.ie,n=!("undefined"==typeof window.opera||"[object Opera]"!=opera.toString()),o=function(t,e,o,i){return document.attachEvent&&"undefined"==typeof Windows&&!n?(t.attachEvent(o,i),function(){t.detachEvent(o,i)}):(t.addEventListener(e,i),function(){t.removeEventListener(o,i)})},i=function(){var t=self.innerHeight,o=document.compatMode;return!o&&!e||n||(t="CSS1Compat"==o?document.documentElement.clientHeight:document.body.clientHeight),t},c=function(t){var e,n,o=t&&t.ownerDocument,i={top:0,left:0};if(o)return e=o.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(i=t.getBoundingClientRect()),n=t&&t==t.window?t:9===t.nodeType?t.defaultView||t.parentWindow:!1,{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}},s=function(t,e){for(var n in e)t[n]=e[n];return t},a="data-src",r={mode:"auto",placeholder:"http://s1.ve.cn/statics/dot.gif",scope:"default"},u=function(){var t,e,n=arguments.length;1==n?(t=[document],e=arguments[0]||{}):2==n&&(t=arguments[0],e=arguments[1]),this.contexts=t,this.cfg=s(r,e),this.init()};u.prototype={init:function(){this.scope=this.getScope(),this.images=this.fetchImgs(),this.images.length>0&&this.load()},getScope:function(){var t=this.cfg.scope,e=i();return"default"===t?2*e:t+e},fetchImgs:function(){for(var t,e,n,o=this.contexts,i=this.scope,s="manual"===this.cfg.mode,r=0,u=0,f=0,d=[],l=o.length;l>r;)for(n=o[r++].getElementsByTagName("img"),u=0,f=n.length;f>u;)e=n[u++],t=e.getAttribute(a),s?(t=e.getAttribute(a),t&&d.push(e)):c(e).top>i&&!t&&d.push(e);return d},load:function(){function t(t){e||(e=setTimeout(function(){n.loadImgs(t),0===n.images.length&&(i(),c()),e=null},100))}var e,n=this,i=o(window,"scroll","onscroll",t),c=o(window,"resize","onresize",function(){n.scope=n.getScope(),t(!0)});"manual"===this.cfg.mode&&n.loadImgs(!0)},loadImgs:function(t){var e=Math.max(document.documentElement.scrollTop,document.body.scrollTop);if(t||!(e<this.cfg.scope)){var n,o,i,s=this.images,r=this.scope+e,u=[];for(n=0;i=s[n++];)c(i).top<=r?(o=i.getAttribute(a),o&&i.src!=o&&(i.removeAttribute(a),i.src=o,i.onload=function(){this.className+=" iLoaded"})):u.push(i);this.images=u}}},cobra.ImageLazyLoad=u}(cobra);